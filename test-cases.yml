---
- summary: |
    Проверка регистрации с валидными данными
  requirement: |
    При вводе валидационных данных аккаунт успешно зарегистрирован
  prerequisites: |
    Открыта главная страница сайта, вход в аккаунт не выполнен
  test-data: |
    Nickname = TestingA
    Email = aliksteir@gmail.com
    Password = 12341234
  steps:
    - Нажать на кнопку "Sing up" в хедере
    - Ввести никнейм, эмейл, пароль, повторить пароль
    - Нажать на кнопку "Submit"
  expected-result: |
    Аккаунт успешно зарегистрирован, происходит переадресация на страницу в лобби

- summary: |
    Проверка регистрации с русским ником
  requirement: |
    При вводе никнейма русскими буквами завершение регистрации выдаст ошибку
  prerequisites: |
    Открыта главная страница сайта, вход в аккаунт не выполнен
  test-data: |
    Nickname = ТестингА
    Email = aliksteir@gmail.com
    Password = 12341234
  steps:
    - Нажать на кнопку "Sing up" в хедере
    - Ввести никнейм, эмейл, пароль, повторить пароль
    - Нажать на кнопку "Submit" 
  expected-result: |
    Регистрация не происходит, форма выделяет строку ввода никнейма, выдает ошибку "Can contain letters, numbers and underscores and should begin with a Latin letter"

- summary: |
    Проверка регистрации с невалидным эмейлом
  requirement: |
    При вводе невалидного эмейла завершение регистрации выдаст ошибку
  prerequisites: |
    Открыта главная страница сайта, вход в аккаунт не выполнен
  test-data: |
    Nickname = TestingA
    Email = aliksteir
    Password = 12341234
  steps:
    - Нажать на кнопку "Sing up" в хедере
    - Ввести никнейм, эмейл, пароль, повторить пароль
    - Нажать на кнопку "Submit" 
  expected-result: |
     Регистрация не проходит, форма выделяет строку эмейла, выдаёт ошибку "Invalid email"

- summary: |
    Проверка регистрации при незаполненном поле
  requirement: |
    Все поля обязательны для заполнения. Если хоть одно поле не заполнено, форма регистрации выдаст ошибку
  prerequisites: |
    Открыта главная страница сайта, вход в аккаун не выполнен
  test-data: |
    Email = aliksteir
    Password = 12341234
  steps:
    - Нажать на кнопку "Sing up" в хедере
    - Ввести эмейл, пароль, повторить пароль
    - Нажать на кнопку "Submit" 
  expected-result: |
    Регистрация не проходит, форма выделяет строку никнейма, выдаёт ошибку "Nickname required"

- summary: |
    Проверка входа через существующий аккаунт GitHub
  requirement: |
    При входе через существующий аккаунт GitHub выполняется авторизация и переход в лобби
  prerequisites: |
    Открыта главная страница сайта, вход в аккаунт не выполнен
  test-data: |
    email = aliksteir@gmail.com
    password = 12341234
  steps:
    - Нажать на кнопку "Sing in" в хедере
    - Нажать на кнопку "Sing in with Github"
    - Ввести данные от существующего аккаунта Github
    - Нажать на кнопку "Sing in"
  expected-result: |
    Выполняется авторизация и переадресация в лобби

- summary: |
    Проверка входа через существующий аккаунт Discord
  requirement: |
    При входе через существующий аккаунт Discord выполняется авторизация и переход в лобби
  prerequisites: |
    Открыта главная страница сайта, вход в аккаунт не выполнен
  test-data: |
    email = aliksteir@gmail.com
    password = 12341234
  steps:
    - Нажать на кнопку "Sing in" в хедере
    - Нажать на кнопку "Sing in with Discord"
    - Ввести данные от существующего аккаунта Discord
    - Нажать на кнопку "Вход"
  expected-result: |
    Выполняется авторизация и переадресация в лобби

- summary: |
    Проверка входа через существующий аккаунт
  requirement: |
    При вводе данных существующего аккаунта выполняется авторизация
  prerequisites: |
    Открыта главная страница сайта, вход в аккаунт не выполнен
  test-data: |
    Email = aliksteir@gmail.com
    Password = 12341234
  steps:
    - Нажать на кнопку "Sing in" в хедере
    - Ввести эмейл и пароль
    - Нажать на кнопку "Submit"
  expected-result: |
    Выполняется авторизация и переадресация в лобби

- summary: |
    Проверка создания игры без авторизации
  requirement: |
    При нажатии на кнопку "TRY SIMPLE BATTLE" создается игра с ботом
  prerequisites: |
    Открыта главная страница сайта, вход в аккаунт не выполнен
  test-data: |
    No data
  steps:
    - Нажать на кнопку "TRY SIMPLE BATTLE"
    - Дождаться переадресации на страницу игры
  expected-result: |
    При нажатии на кнопку "TRY SIMPLE BATTLE" создается игра с ботом

- summary: |
    Проверка создания игры с ботом
  requirement: |
    Пользователь может создать игру с ботом
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на кнопку "Create a game"
    - В пункте "Game Type" выбрать "With a bot"
    - Нажать на кнопку "Create battle"
  expected-result: |
    Создаётся игра с ботом, выполняется переадресация на страницу игры

- summary: |
    Проверка создания игры против другого игрока
  requirement: |
    Пользователь может создать игру против другого игрока
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на кнопку "Create a game"
    - В пункте "Game Type" выбрать "With other user"
    - Нажать на кнопку "Create battle"
    - Дождаться пока другой пользователь в лобби присоединится к игре
  expected-result: |
    Пользователь может создать игру против другого пользователя, матч начнется когда другой пользователь из лобби присоединится к игре

- summary: |
    Проверка создания игры с приглашением конкретного пользователя
  requirement: |
    Пользователь может создать игру против конкретного пользователя
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на кнопку "Create a game"
    - В пункте "Game Type" выбрать "With friend"
    - В стороке "Choose opponent" ввести никнейм другого пользователя
    - Нажать на кнопку "Create battle"
    - Дождаться когда пользователь из шага 3 примет приглашение
  expected-result: |
    После того как второй пользователь примет приглашение, создается игра и у обоих пользователей выполсяется переадресация на страницу игры

- summary: |
    Проверка выбора сложности при создании игры
  requirement : |
    Пользователь может создать игру разного уровня сложности (1-4)
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на кнопку "Create a game"
    - В пункте "Level" выбрать любой уровень сложности (1-4)
    - В строке "Game Type" выбрать "With a bot"
    - Нажать на кнопку "Create battle"
  expected-result: |
    У пользователя есть возможность выбрать уровень сложности при создании игры

- summary: |
    Проверка выбора времени матча при создании игры
  requirement : |
    При создании игры пользователь может выбрать сколько минут будет идти матч 
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на кнопку "Create a game"
    - В пункте "Time control" выбрать количество минут
    - В строке "Game Type" выбрать "With a bot"
    - Нажать на кнопку "Create battle"
  expected-result: |
    У пользователя есть возможность выбрать продолжительность матча при создании игры

- summary: |
    Проверка возможности выбора задания при создании игры
  requirement : |
    При создании игры пользователь может выбрать задание для игры
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на кнопку "Create a game"
    - В пункте "Choose task by name or tags" выбрать любое задание
    - В строке "Game Type" выбрать "With a bot"
    - Нажать на кнопку "Create battle"
  expected-result: |
    У пользователя есть возможность выбрать задание для матча при создании игры

- summary: |
    Проверка возможности присоединиться к чужой игре в лобби
  requirement: |
    Пользователь может присоединиться к игре, созданной другим игроком
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Выбрать из таблицы игр в лобби любую игру со статусом "Waiting_opponent"
    - Нажать на кнопку "Fight" в столбце Actions
    - Дождаться переадресации на страницу матча 
  expected-result: |
    Пользователь может присоединиться к игре, созданной другим игроком в лобби

- summary: |
    Проверка возможности просмотра рейтинга игроков
  requirement: |
    Пользователь может просматривать рейтинг игроков за неделю\месяц\общий
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на свой ник в хедере
    - В выпадающем списке нажать на "Users rating"
    - Просмотреть вкладки weekly\minthly\total
  expected-result: |
    Пользователь может просматривать рейтинг игроков за неделю\месяц\общий

- summary: |
    Проверка поиска пользователя в рейтинге через фильтр по слову
  requirement: |
    У пользователя есть возможность найти конкретного игрока в рейтинге
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница с рейтингом игроков https://codebattle.hexlet.io/users
  test-data: |
    Слово для поиска = Testing
  steps:
    - Перейти во вкладку "Total"
    - Ввести в поиск никнейм игрока, например "Testing"
    - Проверить результаты поиска
  expected-result: |
    В таблице рейтинга остаются пользоватили, в чьих никнеймах содержится слово, введенное в поиск

- summary: |
    Проверка изменения количества отображенных пользователей на странице рейтинга 
  requirement: |
    При просмотре рейтинга пользователь может изменять количество отображенных игроков на странице
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница с рейтингом игроков https://codebattle.hexlet.io/users
  test-data: |
    No data
  steps:
    - Нажать на кнопку с цифрой "20" возле строки "Users per page" сверху таблицы рейтинга
    - В выпадающем списке выбрать число
    - Проверить, что количество пользователей на одной странице рейтинга соответствует выбранному числу
  expected-result: |
    При просмотре рейтинга пользователь может изменять количество отображенных игроков на странице

- summary: |
    Проверка возможности отправки сообщения в чат лобби
  requirement: |
    Зарегестрированным пользователям доступен чат для общения
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на окно ввода сообщения в чате
    - Ввести любой текст
    - Нажать на копку "Send"
    - Проверить отображение сообщения с чате
  expected-result: |
    У зарегистрированных пользователей есть возможность отправлять сообщения в чат в лобби

- summary: |
    Проверка возможности видеть чужие сообщения в чате лобби
  requirement: |
    Зарегестрированным пользователям доступен чат для общения
  prerequisites: |
    В одном браузере выполнен вход в аккаунт Пользователя 1, открыта страница лобби
    В другом браузере выполнен вход в аккаунт Пользователя два, открыта страница лобби
  test-data: |
    Пользователь 1: email = aliksteir@gmail.com, password = 12341234
    Пользователь 2: email = hayby@bk.ru, password = 09870987
  steps:
    - Открыть браузер с авторизированным Пользователем 1
    - Отправить любое сообщение в чат от Пользователя 1
    - Открыть браузер с авторизированным Пользователем 2
    - Проверить отображение сообщения от Пользователя 1 в чате
  expected-result: |
    Зарегистрированные пользователи видят сообщения других пользователей в чате

- summary: |
    Проверка возможности отправить приватное сообщение другому пользователю
  requirement: |
    Зарегестрированным пользователям доступен чат для общения
  prerequisites: |
   Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на значок "конверта" над списком онлайн пользователей в чате
    - В появившемся окне нажать на ник любого пользователя из списка
    - Проверить сменился ли канал чата с "General" на ник выбранного пользователя
    - В окно ввода сообщения написать текст
    - Нажать на кнопку "Send"
    - Проверить отображение сообщения в приватном канале чата
  expected-result: |
    Зарегистрированные пользователи могут создавать приватный чат и писать личные сообщения другим пользователям

- summary: |
    Проверка возможности открыть профиль другого пользователя из чата
  requirement: |
    Пользователь может просматривать информацию о другом пользователе
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на ник любого пользователя окне чата или списке пользователей онлайн
    - В появившемся окне нажать на стоку "Info"
    - Дождаться открытия страницы с информацией о пользователе
  expected-result: |
    Зарегестрированные пользователи могут открыть профиль другого пользователя через окно чата

- summary: |
    Проверка возможности отправить приглашение в игру другому пользователю через список игроков онлайн в лобби
  requirement: |
    Пользователь может отправить приглашение в игру другому пользователю онлайн в лобби
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на ник любого пользователя в окне чата или списке пользователей онлайн
    - В появившемся окне нажать на строку "Send an invite"
    - В появившемся окне выбрать сложность, время матча и задание
    - Нажать на кнопку "Create invite"
  expected-result: |
    Пользователь может отправить приглашение в игру другому пользователю онлайн в лобби

- summary: |
    Проверка отображения оповещения о приглашении в игру в хедере
  requirement: |
    При получении приглашения в игру, в хедере на иконке со скрещенными мечами слева от ника, появляется красный кружок с цифрой, обозначающей количество приглашений
  prerequisites: |
    В одном браузере выполнен вход в аккаунт Пользователя 1, открыта страница лобби
    В другом браузере выполнен вход в аккаунт Пользователя два, открыта страница лобби
  test-data: |
    Пользователь 1: email = aliksteir@gmail.com, password = 12341234
    Пользователь 2: email = hayby@bk.ru, password = 09870987
  steps:
    - Открыть браузер с авторизованным Пользователем 1
    - Создать игру с другом, в качестве приглашенного игрока выбрать Пользователя 2
    - Открыть браузер с авторизованным Пользователем 2
    - Проверить в хереде наличие оповещения о приглашении в игру
  expected-result: |
    При получении приглашения в игру, в хедере на иконке со скрещенными мечами слева от ника, появляется красный кружок с цифрой, обозначающей количество приглашений

- summary: |
    Проверка возможности принять приглашение от другого пользователя
  requirement: |
    При получении приглашения в игру, у пользователя есть возможность принять или отклонить приглашение
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби, получено приглашение в игру от другого пользователя
  test-data: |
    No data
  steps:
    - Нажать на кнопку со скрещенными мечами в хереде
    - В появившемся окне нажать "Accept"
    - Дождаться переадресации на страницу игры
  expected-result: |
    Пользователь может принять приглашение в игру через оповещение в хедере

- summary: |
    Проверка смены языка програмирования во время матча
  requirement: |
    Пользователь может менять язык програмирования во время матча
  prerequisites: |
    Выполнен вход в аккаунт, открыта страница лобби
  test-data: |
    No data
  steps:
    - Нажать на кнопку "Create a game"
    - Выбрать игру против бота
    - Нажать на кнопку "Create battle"
    - Дождаться перехода на страницу игры
    - Нажать на кнопку со стрелочкой вниз внизу окна задания
    - В выпадающем списке выбрать язык програмирования
    - Проводить смену языка програмирования в окне с решением
  expected-result: |
    Пользователь может менять язык програмирования во время матча

- summary: |
    Проверка смены языка задания во время матча
  requirement: |
    Задание отображается на двух языках - русском и английском
  prerequisites: |
    Создана игра с ботом, язык задания - английский
  test-data: |
    No data
  steps:
    - В окне задания нажать на кнопку "EN"
    - В выпадающем списке выбрать "RU"
    - Проверить, перевелось ли задание на русский язык
  expected-result: |
    Во время матча есть возможность переключить язык задания 
